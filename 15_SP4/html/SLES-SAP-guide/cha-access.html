<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SLES for SAP 15 SP4 | Guide | Configuring a firewall</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Configuring a firewall | SLES for SAP 15 SP4"/>
<meta name="description" content="This chapter provides information about restricting access to the system using a firewall and encryption and gives information about connecting to th…"/>
<meta name="product-name" content="SUSE Linux Enterprise Server for SAP Applications"/>
<meta name="product-number" content="15 SP4"/>
<meta name="book-title" content="Guide"/>
<meta name="chapter-title" content="Chapter 10. Configuring a firewall"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="dmitri.popov@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE Linux Enterprise Server for SAP Applications 15 SP4"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Configuring a firewall | SLES for SAP 15 SP4"/>
<meta property="og:description" content="This chapter provides information about restricting access …"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Configuring a firewall | SLES for SAP 15 SP4"/>
<meta name="twitter:description" content="This chapter provides information about restricting access …"/>
<link rel="prev" href="cha-memory-protection.html" title="Chapter 9. Tuning Workload Memory Protection"/><link rel="next" href="cha-clamsap.html" title="Chapter 11. Protecting against malware with ClamSAP"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-slesforsap/blob/main/xml/s4s_access.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Guide</a><span> / </span><a class="crumb" href="cha-access.html">Configuring a firewall</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title"><span class="phrase">Guide</span></div><ol><li><a href="pre-s4s.html" class=" "><span class="title-number"> </span><span class="title-name">Preface</span></a></li><li><a href="cha-about.html" class=" "><span class="title-number">1 </span><span class="title-name">What is SUSE Linux Enterprise Server for SAP Applications?</span></a></li><li><a href="cha-plan.html" class=" "><span class="title-number">2 </span><span class="title-name">Planning the installation</span></a></li><li><a href="cha-install.html" class=" "><span class="title-number">3 </span><span class="title-name">Installing the operating system</span></a></li><li><a href="cha-install-sap.html" class=" "><span class="title-number">4 </span><span class="title-name">Installing SAP applications</span></a></li><li><a href="cha-upgrade-sap-hana-cluster.html" class=" "><span class="title-number">5 </span><span class="title-name">Upgrading an SAP HANA cluster</span></a></li><li><a href="cha-serve-mediaset.html" class=" "><span class="title-number">6 </span><span class="title-name">Setting up an installation server for SAP media sets</span></a></li><li><a href="cha-cluster.html" class=" "><span class="title-number">7 </span><span class="title-name">Setting up an SAP HANA cluster</span></a></li><li><a href="cha-tune.html" class=" "><span class="title-number">8 </span><span class="title-name">Tuning systems with <code class="command">saptune</code></span></a></li><li><a href="cha-memory-protection.html" class=" "><span class="title-number">9 </span><span class="title-name">Tuning Workload Memory Protection</span></a></li><li><a href="cha-access.html" class=" you-are-here"><span class="title-number">10 </span><span class="title-name">Configuring a firewall</span></a></li><li><a href="cha-clamsap.html" class=" "><span class="title-number">11 </span><span class="title-name">Protecting against malware with ClamSAP</span></a></li><li><a href="cha-configure-rdp.html" class=" "><span class="title-number">12 </span><span class="title-name">Connecting via RDP</span></a></li><li><a href="cha-image.html" class=" "><span class="title-number">13 </span><span class="title-name">Creating operating system images</span></a></li><li><a href="cha-trouble.html" class=" "><span class="title-number">14 </span><span class="title-name">Important log files</span></a></li><li><a href="app-additional-software.html" class=" "><span class="title-number">A </span><span class="title-name">Additional software for SLES for SAP</span></a></li><li><a href="app-autoyast-partition.html" class=" "><span class="title-number">B </span><span class="title-name">Partitioning for the SAP system using AutoYaST</span></a></li><li><a href="app-component-supplement.html" class=" "><span class="title-number">C </span><span class="title-name">Supplementary Media</span></a></li><li><a href="win-cheatsheet.html" class=" "><span class="title-number">D </span><span class="title-name">Cheat sheet for Windows administrators
  </span></a></li><li><a href="ape.html" class=" "><span class="title-number">E </span><span class="title-name">GNU licenses</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-access" data-id-title="Configuring a firewall"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Linux Enterprise Server for SAP Applications</span> <span class="productnumber">15 SP4</span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">10 </span><span class="title-name">Configuring a firewall</span></span> <a title="Permalink" class="permalink" href="cha-access.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slesforsap/blob/main/xml/s4s_access.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  This chapter provides information about restricting access to the system
  using a firewall and encryption and gives information about connecting to
  the system remotely.
 </p><section class="sect1" id="sec-configure-firewall" data-id-title="Configuring firewalld"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.1 </span><span class="title-name">Configuring <code class="systemitem">firewalld</code></span></span> <a title="Permalink" class="permalink" href="cha-access.html#sec-configure-firewall">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slesforsap/blob/main/xml/s4s_access.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   By default, the installation workflow of SUSE Linux Enterprise Server for SAP Applications enables
   <code class="systemitem">firewalld</code>.
  </p><div id="id-1.13.4.3" data-id-title="firewalld replaces SuSEfirewall2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: <code class="systemitem">firewalld</code> replaces SuSEfirewall2</div><p>
    SUSE Linux Enterprise Server for SAP Applications 15 introduces <code class="systemitem">firewalld</code> as the new default software
    firewall, replacing SuSEfirewall2. SuSEfirewall2 has not been removed from
    SUSE Linux Enterprise Server for SAP Applications 15 and is still part of the main repository, but it is
    not installed by default. If you are upgrading from a release older than
    SUSE Linux Enterprise Server for SAP Applications 15, SuSEfirewall2 will be unchanged and you must manually
    upgrade to <code class="systemitem">firewalld</code> (see Security and Hardening Guide).
   </p></div><p>
   The firewall must be manually configured to allow network access
   for the following components:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     SAP application
    </p></li><li class="listitem"><p>
     Database (see the documentation of your database vendor; for SAP HANA, see
     <a class="xref" href="cha-access.html#sec-configure-firewall-hana" title="10.2. Configuring HANA-Firewall">Section 10.2, “Configuring HANA-Firewall”</a>)
    </p></li></ul></div><p>
   Additionally, open the ports <code class="literal">1128</code> (TCP) and
   <code class="literal">1129</code> (UDP).
  </p><p>
   SAP applications require multiple open ports and port ranges in the
   firewall. The exact numbers depend on the selected instance. For more
   information, see the documentation provided to you by SAP.
  </p></section><section class="sect1" id="sec-configure-firewall-hana" data-id-title="Configuring HANA-Firewall"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.2 </span><span class="title-name">Configuring HANA-Firewall</span></span> <a title="Permalink" class="permalink" href="cha-access.html#sec-configure-firewall-hana">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slesforsap/blob/main/xml/s4s_access.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   To simplify setting up a firewall for SAP HANA, install the package
   <span class="package">HANA-Firewall</span>. HANA-Firewall adds rule sets to your
   existing SuSEfirewall2 configuration.
  </p><p>
   HANA-Firewall consists of the following parts:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="formalpara-title">YaST module <span class="guimenu">SAP HANA firewall</span>. </span>
      Allows configuring, applying, and reverting firewall rules for SAP HANA
      from a graphical user interface.
     </p></li><li class="listitem"><p><span class="formalpara-title">Command-line utility <code class="systemitem">hana-firewall</code>. </span>
      Creates XML files containing firewall rules for SAP HANA.
     </p><p>
     Instead of using YaST, you can configure firewall rules using the
     configuration file at <code class="filename">/etc/sysconfig/hana-firewall</code>.
    </p></li></ul></div><div id="id-1.13.5.5" data-id-title="SAP HANA MDC databases" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: SAP HANA MDC databases</div><p>
    For multi-tenant SAP HANA (MDC) databases, determining automatically the port
    numbers that need to be opened is not yet possible. If you are working with
    a multi-tenant SAP HANA database system, run a script to
    create a new service definition before using YaST:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">cd /etc/hana-firewall.d</code>
<code class="prompt root"># </code><code class="command">hana-firewall define-new-hana-service</code></pre></div><p>
    The script prompts you to answer a series of questions, including TCP and UDP port ranges that need to be opened.
   </p></div><div id="id-1.13.5.6" data-id-title="Install HANA-Firewall packages" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Install HANA-Firewall packages</div><p>
    Before continuing, make sure that the packages
    <span class="package">HANA-Firewall</span> and
    <span class="package">yast2-hana-firewall</span> are installed.
   </p></div><div class="procedure" id="id-1.13.5.7" data-id-title="Using HANA-Firewall"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 10.1: </span><span class="title-name">Using HANA-Firewall </span></span><a title="Permalink" class="permalink" href="cha-access.html#id-1.13.5.7">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slesforsap/blob/main/xml/s4s_access.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Make sure the SAP HANA databases for which you want to configure the
     firewall are correctly installed.
    </p></li><li class="step"><p>
     To open the appropriate YaST module, select
     <span class="guimenu">Applications</span> › <span class="guimenu">YaST</span>, <span class="guimenu">Security and Users</span> › <span class="guimenu">Configure system firewall for SAP HANA</span>.
    </p></li><li class="step"><p>
     Under <span class="guimenu">Global Options</span>, activate
     <span class="guimenu">Enable and reload firewalld</span>.
    </p></li><li class="step"><p>
    Select the desired zone from the <span class="guimenu">Zone</span> drop-down list, and add the required services using the right arrow button.
    </p><p>
     To add services other than the preconfigured ones, use the
     following notation:
    </p><div class="verbatim-wrap"><pre class="screen"><em class="replaceable">SERVICE_NAME</em>:<em class="replaceable">CIDR_NOTATION</em></pre></div><p>
     For more information about the CIDR notation, see
     <a class="link" href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing" target="_blank">https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing</a>.
     To find out which services are available on your system, use
     <code class="command">getent services</code>.
    </p></li><li class="step"><p>
     When you are done, click <span class="guimenu">OK</span>.
    </p><p>
     The firewall rules from HANA-Firewall will now
     be compiled and applied. Then, the service
     <code class="systemitem">hana-firewall</code> will be restarted.
    </p></li><li class="step"><p>
     Finally, check whether HANA-Firewall was enabled
     correctly:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code><code class="command">hana-firewall status</code>
HANA firewall is active. Everything is OK.</pre></div></li></ol></div></div><p>
   For more information, see the man page of <code class="command">hana-firewall</code>.
  </p></section><section class="sect1" id="sec-configure-saprouter" data-id-title="SAProuter integration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10.3 </span><span class="title-name">SAProuter integration</span></span> <a title="Permalink" class="permalink" href="cha-access.html#sec-configure-saprouter">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slesforsap/blob/main/xml/s4s_access.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The SAProuter software from SAP allows proxying network traffic
   between different SAP
   systems or between an SAP system and outside networks. SUSE Linux Enterprise Server for SAP Applications now
   provides integration for SAProuter into
   <code class="systemitem">systemd</code>. This means that SAProuter
   will be started and stopped properly with the operating system and can be
   controlled using <code class="command">systemctl</code>.
  </p><p>
   Before you can use this functionality, make sure the following has been
   installed, in this order:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     An SAP application that includes SAProuter
    </p></li><li class="listitem"><p>
     The SAProuter systemd integration, packaged as
     <span class="package">saprouter-systemd</span>
    </p></li></ul></div><p>
   If you got the order of applications to install wrong initially, reinstall
   <span class="package">saprouter-systemd</span>.
  </p><p>
   To control SAProuter with <code class="command">systemctl</code>, use:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Enabling the SAProuter service:
     <code class="command">systemctl enable saprouter</code>
    </p></li><li class="listitem"><p>
     Starting the SAProuter service:
     <code class="command">systemctl start saprouter</code>
    </p></li><li class="listitem"><p>
     Showing the Status of SAProuter service:
     <code class="command">systemctl status saprouter</code>
    </p></li><li class="listitem"><p>
     Stopping the SAProuter service:
     <code class="command">systemctl stop saprouter</code>
    </p></li><li class="listitem"><p>
     Disabling the SAProuter service:
     <code class="command">systemctl disable saprouter</code>
    </p></li></ul></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-memory-protection.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 9 </span>Tuning Workload Memory Protection</span></a> </div><div><a class="pagination-link next" href="cha-clamsap.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 11 </span>Protecting against malware with ClamSAP</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-access.html#sec-configure-firewall"><span class="title-number">10.1 </span><span class="title-name">Configuring <code class="systemitem">firewalld</code></span></a></span></li><li><span class="sect1"><a href="cha-access.html#sec-configure-firewall-hana"><span class="title-number">10.2 </span><span class="title-name">Configuring HANA-Firewall</span></a></span></li><li><span class="sect1"><a href="cha-access.html#sec-configure-saprouter"><span class="title-number">10.3 </span><span class="title-name">SAProuter integration</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>